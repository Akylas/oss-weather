{
  "$schema": "../schema.json",
  "name": "HourlyWeatherWidget",
  "displayName": "Hourly Forecast",
  "description": "Shows hourly weather forecast with icons and temperatures",
  "supportedSizes": [
    { "width": 260, "height": 60, "family": "medium" },
    { "width": 260, "height": 80, "family": "medium" },
    { "width": 260, "height": 120, "family": "medium" },
    { "width": 360, "height": 180, "family": "large" }
  ],
  "defaultPadding": 6,
  "background": {
    "type": "solid",
    "color": "widgetBackground"
  },
  "layout": {
    "type": "column",
    "alignment": "start",
    "crossAlignment": "stretch",
    "padding": ["case",
      ["<", ["get", "size.height"], 60], 2,
      ["<", ["get", "size.height"], 80], 4,
      6
    ],
    "children": [
      {
        "type": "conditional",
        "condition": [">=", ["get", "size.height"], 80],
        "then": {
          "type": "column",
          "children": [
            {
              "type": "label",
              "text": ["get", "data.locationName"],
              "fontSize": 14,
              "color": "onSurfaceVariant",
              "maxLines": 1
            },
            {
              "type": "spacer",
              "size": 4
            }
          ]
        }
      },
      {
        "type": "row",
        "fillWidth": true,
        "fillHeight": true,
        "children": [
          {
            "type": "forEach",
            "items": "hourlyData",
            "limit": 8,
            "itemTemplate": {
              "type": "column",
              "alignment": "center",
              "crossAlignment": "center",
              "width": 50,
              "fillHeight": true,
              "paddingHorizontal": 4,
              "spacing": ["case",
                ["<", ["get", "size.height"], 60], 0,
                2
              ],
              "children": [
                {
                  "type": "label",
                  "text": ["get", "item.time"],
                  "fontSize": ["case",
                    ["<", ["get", "size.height"], 60], 9,
                    11
                  ],
                  "color": "onSurfaceVariant",
                  "maxLines": 1
                },
                {
                  "type": "image",
                  "src": ["get", "item.iconPath"],
                  "size": ["case",
                    ["<", ["get", "size.height"], 60], 24,
                    ["<", ["get", "size.height"], 80], 28,
                    32
                  ]
                },
                {
                  "type": "label",
                  "text": ["get", "item.temperature"],
                  "fontSize": ["case",
                    ["<", ["get", "size.height"], 60], 12,
                    14
                  ],
                  "fontWeight": "bold",
                  "color": "onSurface",
                  "maxLines": 1
                },
                {
                  "type": "conditional",
                  "condition": ["all",
                    [">=", ["get", "size.height"], 60],
                    ["has", "item.precipAccumulation"]
                  ],
                  "then": {
                    "type": "column",
                    "children": [
                      {
                        "type": "spacer",
                        "size": 2,
                        "visibleIf": [">=", ["get", "size.height"], 60]
                      },
                      {
                        "type": "label",
                        "text": ["get", "item.precipAccumulation"],
                        "fontSize": ["case",
                          ["<", ["get", "size.height"], 80], 9,
                          10
                        ],
                        "color": "onSurfaceVariant"
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    ]
  }
}
