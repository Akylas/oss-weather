{
    "$schema": "../schema.json",
    "name": "SimpleWeatherWidget",
    "displayName": "Simple Weather",
    "description": "Shows current temperature, weather icon, and location",
    "supportedSizes": [
        { "width": 50, "height": 50, "family": "small" },
        { "width": 80, "height": 80, "family": "small" },
        { "width": 120, "height": 120, "family": "small" },
        { "width": 260, "height": 120, "family": "medium" }
    ],
    "defaultPadding": ["case", ["<", ["get", "size.width"], 80], 0, ["<", ["get", "size.width"], 120], 4, 8],
    "background": {
        "type": "solid",
        "color": "widgetBackground"
    },
    "layout": {
        "type": ["case", 
            ["all", ["<", ["get", "size.width"], 80], ["<", ["get", "size.height"], 80]], "column",
            ["all", [">=", ["get", "size.width"], 200], [">", ["get", "size.width"], ["get", "size.height"]]], "row",
            "column"
        ],
        "alignment": "center",
        "crossAlignment": "center",
        "spacing": ["case", 
            ["<", ["get", "size.width"], 80], 2,
            [">=", ["get", "size.width"], 200], 8,
            4
        ],
        "children": [
            {
                "type": "label",
                "text": ["get", "locationName"],
                "fontSize": ["case", [">=", ["get", "size.width"], 200], 16, 12],
                "color": "onSurfaceVariant",
                "textAlign": "center",
                "maxLines": 1,
                "visibleIf": ["all", [">=", ["get", "size.width"], 80], ["<=", ["get", "size.width"], ["get", "size.height"]]]
            },
            {
                "type": "spacer",
                "flex": ["case", ["<", ["get", "size.width"], 200], 1, null],
                "size": ["case", [">=", ["get", "size.width"], 200], 8, null],
                "visibleIf": ["<=", ["get", "size.width"], ["get", "size.height"]]
            },
            {
                "type": "column",
                "alignment": "center",
                "crossAlignment": "center",
                "spacing": 4,
                "flex": ["case", [">", ["get", "size.width"], ["get", "size.height"]], 1, null],
                "children": [
                    {
                        "type": "image",
                        "src": ["get", "iconPath"],
                        "size": ["case", 
                            ["<", ["get", "size.width"], 80], ["*", ["get", "size.width"], 0.5],
                            ["<", ["get", "size.width"], 200], ["*", ["get", "size.width"], 0.4],
                            [">", ["get", "size.width"], ["get", "size.height"]], 64,
                            72
                        ],
                        "visibleIf": ["has", "iconPath"]
                    }
                ]
            },
            {
                "type": "spacer",
                "flex": ["case", ["all", [">=", ["get", "size.width"], 80], ["<", ["get", "size.width"], 200]], 1, null],
                "size": ["case", 
                    ["<", ["get", "size.width"], 80], 0,
                    [">=", ["get", "size.width"], 200], 8,
                    null
                ],
                "visibleIf": ["<=", ["get", "size.width"], ["get", "size.height"]]
            },
            {
                "type": "column",
                "alignment": "center",
                "crossAlignment": "center",
                "spacing": 4,
                "flex": ["case", [">", ["get", "size.width"], ["get", "size.height"]], 1, null],
                "children": [
                    {
                        "type": "label",
                        "text": ["get", "temperature"],
                        "fontSize": ["case", 
                            ["<", ["get", "size.width"], 80], 14,
                            ["<", ["get", "size.width"], 120], 22,
                            ["<", ["get", "size.width"], 200], 32,
                            [">", ["get", "size.width"], ["get", "size.height"]], 40,
                            48
                        ],
                        "fontWeight": "bold",
                        "color": "onSurface",
                        "textAlign": "center"
                    },
                    {
                        "type": "label",
                        "text": ["get", "locationName"],
                        "fontSize": ["case", 
                            ["<", ["get", "size.width"], 80], 8,
                            [">", ["get", "size.width"], ["get", "size.height"]], 12,
                            0
                        ],
                        "color": "onSurfaceVariant",
                        "textAlign": "center",
                        "maxLines": 1,
                        "visibleIf": ["any", 
                            ["<", ["get", "size.width"], 80],
                            [">", ["get", "size.width"], ["get", "size.height"]]
                        ]
                    },
                    {
                        "type": "label",
                        "text": ["get", "description"],
                        "fontSize": 14,
                        "color": "onSurfaceVariant",
                        "textAlign": "center",
                        "visibleIf": ["all", 
                            ["has", "description"],
                            [">=", ["get", "size.width"], 200],
                            ["<=", ["get", "size.width"], ["get", "size.height"]]
                        ]
                    }
                ]
            }
        ]
    }
}
